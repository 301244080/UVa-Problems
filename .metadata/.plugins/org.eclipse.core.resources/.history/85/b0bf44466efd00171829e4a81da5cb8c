import java.io.BufferedReader;
import java.io.FileReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.HashSet;
import java.util.List;
import java.util.Map;
import java.util.Set;

public class ErdosNumber {

	public static void main(String[] args) throws IOException {
		
//		BufferedReader br = new BufferedReader (new InputStreamReader(System.in));
		
		BufferedReader br = new BufferedReader (new FileReader ("C:\\Users\\yy957\\Desktop\\ACM\\Main\\inputs\\p10044.txt"));
		
		int n = Integer.parseInt(br.readLine());		
		while (n-- > 0) {					
			String s[] = br.readLine().split(" ");
			int P = Integer.parseInt(s[0]);
			int N = Integer.parseInt(s[1]);
			Set<String> allAuthors = new HashSet<>();
			List<List<String>> books = new ArrayList<>();
			for (int i = 0; i < P; i++) {				
				String line = br.readLine();
				String[] linePart1 = line.split(":");
				String[] temp_list = linePart1[0].split(", ");
				List<String> curtBook = new ArrayList<>();
				for (int j = 0; j < temp_list.length; j += 2) {					
					String full_name = (temp_list[j] + ',' + temp_list[j+1]);
					System.out.println(full_name);
					curtBook.add(full_name);
					allAuthors.add(full_name);
				}
				books.add(new ArrayList<String>(curtBook));
			}
			
			String[] nameList = new String[N];
			for (int i = 0; i < N; i++) {
				nameList[i] = br.readLine();
			}
			calculate(books, nameList, allAuthors);
		}
	}
	
	static void calculate(List<List<String>> books, String[] nameList, Set<String> allAuthors) {
		
	}
	
	static Map<String, Set<String>> initGraph(List<List<String>> books, Set<String> allAuthors) {
		Map<String, Set<String>> graph = new HashMap<>();
		for (String author : allAuthors) {
			graph.put(author, new HashSet<String>());
		}
		
		for (int i = 0; i < books.size(); i++) {
			List<String> curtBook = books.get(i);
			for (String author : curtBook) {
				
			}
		}
		
		return graph;
	}

}
